{% extends "base.html" %}

{% block title %}–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã - {{ submission.assignment.title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/review.css">
{% endblock %}

{% block content %}
<div class="review-container">
    <div class="review-header">
        <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã</h1>
        
        <div class="student-info">
            <h2>{{ submission.student.full_name }}</h2>
            <p>{{ submission.student.group or '–ë–µ–∑ –≥—Ä—É–ø–ø—ã' }} ‚Ä¢ {{ submission.student.email }}</p>
        </div>
    </div>
    
    <div class="review-grid">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - —Ä–∞–±–æ—Ç–∞ -->
        <div class="review-work-panel">
            <div class="work-info">
                <h3>–ó–∞–¥–∞–Ω–∏–µ: {{ submission.assignment.title }}</h3>
                
                <div class="work-meta">
                    <span>üìÑ {{ submission.file_name }}</span>
                    <span>üìÖ {{ submission.submitted_at.strftime('%d.%m.%Y %H:%M') }}</span>
                    <span>üìä {{ (submission.file_size / 1024)|round }} –ö–ë</span>
                </div>
                
                {% if submission.comments %}
                <div class="student-comments">
                    <h4>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å—Ç—É–¥–µ–Ω—Ç–∞:</h4>
                    <p>{{ submission.comments }}</p>
                </div>
                {% endif %}
            </div>
            
            <div class="work-preview">
                <!-- –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–∞ -->
                <div class="file-preview-placeholder">
                    <p>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p>
                    <a href="/{{ submission.file_path }}" class="btn btn-primary" download>
                        –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
                    </a>
                </div>
            </div>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –æ—Ü–µ–Ω–∫–∞ -->
        <div class="review-grade-panel">
            <h3>–í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏</h3>
            
            <form method="POST" action="/submissions/{{ submission.id }}/review" class="grade-form">
                <div class="form-group">
                    <label for="score">–ë–∞–ª–ª—ã</label>
                    <input 
                        type="number" 
                        id="score" 
                        name="score" 
                        min="0" 
                        max="{{ submission.assignment.max_score }}" 
                        required
                        placeholder="0-{{ submission.assignment.max_score }}"
                    >
                </div>
                
                <div class="form-group">
                    <label for="feedback">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</label>
                    <textarea 
                        id="feedback" 
                        name="feedback" 
                        rows="5"
                        placeholder="–ü–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ä–∞–±–æ—Ç–µ..."
                    ></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                    <a href="/submissions" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}